<div class="grid-x grid-padding-x align-middle">
  <div class="cell medium-6">
    {{#mapbox-gl id='zoning-map' initOptions=initOptions mapLoaded=(action 'handleMapLoad') as |map|}}
      {{#with (await vectorSource) as |vSource|}}
        {{#map.source sourceId='zoning' source=vSource as |source|}}
          {{source.layer layer=zoningLabelsLayer before='waterway-label'}}
          {{source.layer layer=pointsLayer before='waterway-label'}}
        {{/map.source}}
      {{/with}}

      {{map.call 'fitBounds' mapState.bounds}}
      {{map.on 'mousemove' (action 'handleMouseover')}}
      {{map.on 'mouseout' (action 'handleMouseleave')}}

      {{#if mapState.currentlySelected}}
        {{#map.source sourceId='currentlySelected' source=cdSelectedSource as |source|}}
          {{source.layer layer=cdSelectedLayer before='waterway-label'}}
        {{/map.source}}
      {{/if}}

      {{hover-tooltip mouse=mouseoverLocation text=tooltip-text}}
    {{/mapbox-gl}}
  </div>
  <div class="cell medium-6">
    {{#each (await data) as |data|}}
      <p class="grid-x">
        <span class="legend-dot-wrapper cell small-2" style="color:{{data.color}};">
          <span class="legend-dot" style="background-color:{{data.color}}"></span>
          <strong>{{data.count}}</strong>
        </span>
        <small class="legend-dot-wrapper cell auto">{{data.primaryzone}}</small>
      </p>
    {{/each}}
  </div>
</div>
{{yield}}
